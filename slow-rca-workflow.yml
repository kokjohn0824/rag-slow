app:
  description: æ…¢é€Ÿå‘Šè­¦æ ¹å› åˆ†æå·¥ä½œæµ - å¾å‘Šè­¦ä¿¡è‡ªå‹•åŒ–å®Œæˆ RCA
  icon: ğŸ¤–
  icon_background: '#E4FBCC'
  mode: workflow
  name: Slow-RCA-æ…¢é€Ÿå‘Šè­¦æ ¹å› åˆ†æ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_api_compatible:0.0.27@f9ce3ff5e28f09931a3a7fca59add2d09590408f7e9a3d701b10c77a60249719
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: é–‹ç™¼ç’°å¢ƒ API åŸºç¤ URL
    id: env-dev-domain
    name: DEV_DOMAIN
    selector:
    - env
    - DEV_DOMAIN
    value: http://192.168.4.208
    value_type: string
  - description: Tempo API åŸºç¤ URL (tempo-latency-anomaly-service)
    id: env-tempo-url
    name: TEMPO_API_URL
    selector:
    - env
    - TEMPO_API_URL
    value: http://localhost:8081
    value_type: string
  - description: RAG API åŸºç¤ URL (tempo-otlp-trace-demo)
    id: env-rag-url
    name: RAG_API_URL
    selector:
    - env
    - RAG_API_URL
    value: http://localhost:8080
    value_type: string
  - description: æ‹“æ’² API åŸºç¤ URL (æœªå¯¦ä½œ)
    id: env-topology-url
    name: TOPOLOGY_API_URL
    selector:
    - env
    - TOPOLOGY_API_URL
    value: http://topology.example.com
    value_type: string
  - description: SNMP/Metrics API åŸºç¤ URL (æœªå¯¦ä½œ)
    id: env-snmp-url
    name: SNMP_API_URL
    selector:
    - env
    - SNMP_API_URL
    value: http://metrics.example.com
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-to-parse-alert
      selected: false
      source: node-start
      sourceHandle: source
      target: node-parse-alert
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: parse-alert-to-parse-time
      selected: false
      source: node-parse-alert
      sourceHandle: source
      target: node-parse-time
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: parse-time-to-tempo-search
      selected: false
      source: node-parse-time
      sourceHandle: source
      target: node-tempo-search
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: tempo-search-to-judge-anomaly
      selected: false
      source: node-tempo-search
      sourceHandle: source
      target: node-judge-anomaly
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: judge-anomaly-to-trace-detail
      selected: false
      source: node-judge-anomaly
      sourceHandle: source
      target: node-trace-detail
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: trace-detail-to-critical-path
      selected: false
      source: node-trace-detail
      sourceHandle: source
      target: node-critical-path
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: critical-path-to-rag-search
      selected: false
      source: node-critical-path
      sourceHandle: source
      target: node-rag-search
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: llm
      id: rag-search-to-rca
      selected: false
      source: node-rag-search
      sourceHandle: source
      target: node-rca
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: end
      id: rca-to-end
      selected: false
      source: node-rca
      sourceHandle: source
      target: node-end
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - default: ''
          hint: è«‹è¼¸å…¥å‘Šè­¦ä¿¡å…§å®¹
          label: å‘Šè­¦ä¿¡å…§å®¹
          max_length: 5000
          options: []
          placeholder: è²¼ä¸Šå‘Šè­¦ä¿¡å…¨æ–‡...
          required: true
          type: paragraph
          variable: targetLog
      height: 109
      id: node-start
      position:
        x: -190
        y: 337.5
      positionAbsolute:
        x: -190
        y: 337.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: /Users/chtadmin/mlx/models/Qwen2.5-14B-Instruct-bf16
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: system-parse-alert
          role: system
          text: 'ä½ æ˜¯ä¸€å€‹å‘Šè­¦äº‹ä»¶è§£æå¼•æ“ï¼Œå°ˆé–€è² è²¬å°‡åŸå§‹å‘Šè­¦ä¿¡å…§å®¹è§£æç‚ºçµæ§‹åŒ–è³‡æ–™ã€‚


            ä½ çš„ä»»å‹™åƒ…é™æ–¼ã€Œè§£æèˆ‡æ•´ç†ã€ï¼Œä¸å¾—é€²è¡ŒåŸå› æ¨è«–ã€è§£æ±ºå»ºè­°æˆ–åˆ†æåˆ¤æ–·ã€‚


            æ‰€æœ‰è¼¸å‡ºå¿…é ˆç‚º JSON æ ¼å¼ï¼Œä¸å¾—è¼¸å‡ºä»»ä½•èªªæ˜æ–‡å­—ã€‚


            ## è§£æè¦å‰‡

            1. è‹¥æ¬„ä½ä¸å­˜åœ¨ï¼Œè«‹å¡«å…¥ null

            2. ä¿ç•™åŸå§‹æ–‡å­—ï¼Œä¸è¦è‡ªè¡Œç¿»è­¯æˆ–æ”¹å¯«å…§å®¹

            3. æ™‚é–“è«‹ç¶­æŒåŸå§‹æ ¼å¼

            4. åƒ…è¼¸å‡º JSONï¼Œä¸å¾—æœ‰ä»»ä½•é¡å¤–èªªæ˜

            5. user_symptom å¿…é ˆæ˜¯ä»¥ä¸‹ä¹‹ä¸€: slow, timeout, lag, error, intermittent, unknown

            '
        - id: user-parse-alert
          role: user
          text: "è«‹è§£æä»¥ä¸‹å‘Šè­¦ä¿¡å…§å®¹ï¼Œä¸¦ä¾æŒ‡å®šæ¬„ä½è¼¸å‡ºçµæ§‹åŒ– JSONã€‚\n\nå‘Šè­¦ä¿¡å…§å®¹ï¼š\n{{#node-start.targetLog#}}\n\
            \nè¼¸å‡ºæ¬„ä½çµæ§‹å¦‚ä¸‹ï¼š\n{\n  \"event\": string,\n  \"device\": string,\n  \"host\"\
            : string,\n  \"env\": string,\n  \"service_name\": string,\n  \"time_stamp\"\
            : string,\n  \"url\": string,\n  \"domain\": string,\n  \"port\": number\
            \ | null,\n  \"api_path\": string,\n  \"http_method\": string | null,\n\
            \  \"user_symptom\": string\n}\n"
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              api_path:
                type: string
              device:
                type: string
              domain:
                type: string
              env:
                type: string
              event:
                type: string
              host:
                type: string
              http_method:
                type: string
              port:
                type: number
              service_name:
                type: string
              time_stamp:
                type: string
              url:
                type: string
              user_symptom:
                type: string
            required:
            - time_stamp
            - user_symptom
            type: object
        structured_output_enabled: true
        title: è§£æå‘Šè­¦ä¿¡
        type: llm
        vision:
          enabled: false
      height: 88
      id: node-parse-alert
      position:
        x: 100
        y: 358.5
      positionAbsolute:
        x: 100
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "from datetime import datetime, timedelta\nfrom zoneinfo import ZoneInfo\n\
          \ndef main(event_timestamp: str):\n    \"\"\"\n    å°‡æœ¬åœ°æ™‚é–“è½‰æ›ç‚º UTC æ™‚é–“ç¯„åœ\n \
          \   é è¨­æ™‚å€: Asia/Taipei\n    æ™‚é–“çª—å£: t-15m ~ t\n    \"\"\"\n    start, end,\
          \ start_unix, end_unix = local_to_utc_iso_z_range(\n        event_timestamp,\n\
          \        \"Asia/Taipei\",\n        delta_minutes=15,\n    )\n    return {\n\
          \        \"start\": start,\n        \"end\": end,\n        \"start_unix\"\
          : start_unix,\n        \"end_unix\": end_unix,\n    }\n\ndef local_to_utc_iso_z_range(\n\
          \    ts: str,\n    tz_name: str,\n    delta_minutes: int,\n) -> tuple[str,\
          \ str, int, int]:\n    local_tz = ZoneInfo(tz_name)\n\n    # å˜—è©¦å¤šç¨®æ™‚é–“æ ¼å¼\n\
          \    formats = [\n        \"%Y-%m-%d %H:%M:%S\",\n        \"%Y/%m/%d %H:%M:%S\"\
          ,\n        \"%Y-%m-%dT%H:%M:%S\",\n        \"%Y/%m/%d %H:%M\",\n    ]\n \
          \   \n    local_dt = None\n    for fmt in formats:\n        try:\n      \
          \      local_dt = datetime.strptime(ts, fmt).replace(tzinfo=local_tz)\n \
          \           break\n        except ValueError:\n            continue\n   \
          \ \n    if local_dt is None:\n        # å¦‚æœéƒ½è§£æå¤±æ•—ï¼Œä½¿ç”¨ç•¶å‰æ™‚é–“\n        local_dt = datetime.now(local_tz)\n\
          \n    # è¨ˆç®—æ™‚é–“ç¯„åœ\n    start_local = local_dt - timedelta(minutes=delta_minutes)\n\
          \    end_local = local_dt\n\n    # è½‰æ›ç‚º UTC\n    start_utc = start_local.astimezone(ZoneInfo(\"\
          UTC\"))\n    end_utc = end_local.astimezone(ZoneInfo(\"UTC\"))\n\n    fmt_out\
          \ = \"%Y-%m-%dT%H:%M:%SZ\"\n    return (\n        start_utc.strftime(fmt_out),\n\
          \        end_utc.strftime(fmt_out),\n        int(start_utc.timestamp()),\n\
          \        int(end_utc.timestamp())\n    )\n"
        code_language: python3
        outputs:
          end:
            children: null
            type: string
          end_unix:
            children: null
            type: number
          start:
            children: null
            type: string
          start_unix:
            children: null
            type: number
        selected: false
        title: è§£ææ™‚é–“è»¸
        type: code
        variables:
        - value_selector:
          - node-parse-alert
          - structured_output
          - time_stamp
          value_type: string
          variable: event_timestamp
      height: 52
      id: node-parse-time
      position:
        x: 392.5
        y: 358.5
      positionAbsolute:
        x: 392.5
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: mapping-body
            key: ''
            type: text
            value: "{\n  \"timestamp\": \"{{#node-parse-time.end#}}\",\n  \"env\"\
              : \"{{#node-parse-alert.structured_output.env#}}\",\n  \"domain\": \"\
              {{#node-parse-alert.structured_output.domain#}}\",\n  \"port\": {{#node-parse-alert.structured_output.port#}},\n\
              \  \"api_path\": \"{{#node-parse-alert.structured_output.api_path#}}\"\
              ,\n  \"url\": \"{{#node-parse-alert.structured_output.url#}}\"\n}\n"
          type: raw-text
        headers: 'Content-Type:application/json

          accept:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 30
          max_write_timeout: 10
        title: æŸ¥è©¢æœå‹™æ˜ å°„ (å·²åœç”¨ - ç›´æ¥ä½¿ç”¨å‘Šè­¦ä¿¡ service_name)
        type: http-request
        url: '{{#env.DEV_DOMAIN#}}:8000/api/service-mapping'
        variables: []
      height: 141
      id: node-mapping-api
      position:
        x: 578.75
        y: 489.74999999999994
      positionAbsolute:
        x: 578.75
        y: 489.74999999999994
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str):\n    \"\"\"\n    è§£ææœå‹™æ˜ å°„ API å›æ‡‰\n\
          \    æå– rootServiceName, version, owner_team ç­‰è³‡è¨Š\n    \"\"\"\n    try:\n\
          \        data = json.loads(body)\n    except:\n        return {\n      \
          \      \"rootServiceName\": \"\",\n            \"service_name\": \"\",\n\
          \            \"version\": \"\",\n            \"owner_team\": \"\",\n   \
          \         \"confidence\": 0,\n            \"error\": \"Failed to parse mapping\
          \ response\"\n        }\n    \n    # è™•ç†å¯èƒ½çš„å›æ‡‰æ ¼å¼\n    if \"candidates\" in\
          \ data and len(data[\"candidates\"]) > 0:\n        candidate = data[\"candidates\"\
          ][0]\n        return {\n            \"rootServiceName\": candidate.get(\"\
          rootServiceName\", \"\"),\n            \"service_name\": candidate.get(\"\
          service_name\", \"\"),\n            \"version\": candidate.get(\"version\"\
          , \"\"),\n            \"owner_team\": candidate.get(\"owner_team\", \"\"\
          ),\n            \"confidence\": data.get(\"confidence\", 0),\n         \
          \   \"error\": \"\"\n        }\n    \n    # ç›´æ¥å›æ‡‰æ ¼å¼\n    return {\n     \
          \   \"rootServiceName\": data.get(\"rootServiceName\", data.get(\"service_name\"\
          , \"\")),\n        \"service_name\": data.get(\"service_name\", \"\"),\n\
          \        \"version\": data.get(\"version\", \"\"),\n        \"owner_team\"\
          : data.get(\"owner_team\", \"\"),\n        \"confidence\": data.get(\"confidence\"\
          , 0.5),\n        \"error\": \"\"\n    }\n"
        code_language: python3
        outputs:
          confidence:
            children: null
            type: number
          error:
            children: null
            type: string
          owner_team:
            children: null
            type: string
          rootServiceName:
            children: null
            type: string
          service_name:
            children: null
            type: string
          version:
            children: null
            type: string
        selected: false
        title: è§£ææ˜ å°„çµæœ (å·²åœç”¨)
        type: code
        variables:
        - value_selector:
          - node-mapping-api
          - body
          value_type: string
          variable: body
      height: 52
      id: node-parse-mapping
      position:
        x: 752.5
        y: 358.5
      positionAbsolute:
        x: 752.5
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'accept:application/json'
        method: get
        params: 'service={{#node-parse-alert.structured_output.service_name#}}&endpoint={{#node-parse-alert.structured_output.api_path#}}&start={{#node-parse-time.start_unix#}}&end={{#node-parse-time.end_unix#}}&limit=5'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 60
          max_write_timeout: 10
        title: æœå°‹æ…¢ Traces
        type: http-request
        url: '{{#env.TEMPO_API_URL#}}/v1/traces'
        variables: []
      height: 141
      id: node-tempo-search
      position:
        x: 946.25
        y: 489.74999999999994
      positionAbsolute:
        x: 946.25
        y: 489.74999999999994
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str):\n    \"\"\"\n    åˆ¤æ–·æ˜¯å¦å­˜åœ¨ç•°å¸¸æ…¢çš„ traces\n\
          \    ä¸¦é¸å‡º top trace ä¾›å¾ŒçºŒåˆ†æ\n    è™•ç†æ–°çš„ API æ ¼å¼: { service, endpoint, traces:\
          \ [{ traceId, durationMs, ... }] }\n    \"\"\"\n    try:\n        data =\
          \ json.loads(body)\n    except:\n        return {\n            \"is_anomalous\"\
          : False,\n            \"top_trace_id\": \"\",\n            \"top_trace_duration_ms\"\
          : 0,\n            \"slow_trace_count\": 0,\n            \"baseline_p95_ms\"\
          : 0,\n            \"evidence_summary\": \"ç„¡æ³•è§£æ Tempo å›æ‡‰\"\n        }\n \
          \   \n    traces = data.get(\"traces\", [])\n    \n    if not traces:\n \
          \       return {\n            \"is_anomalous\": False,\n            \"top_trace_id\"\
          : \"\",\n            \"top_trace_duration_ms\": 0,\n            \"slow_trace_count\"\
          : 0,\n            \"baseline_p95_ms\": 0,\n            \"evidence_summary\"\
          : \"æœªæ‰¾åˆ° traces\"\n        }\n    \n    # å–æœ€æ…¢çš„ trace (æ–°æ ¼å¼ä½¿ç”¨ durationMs)\n\
          \    top_trace = max(traces, key=lambda t: t.get(\"durationMs\", t.get(\"\
          duration_ms\", 0)))\n    top_duration = top_trace.get(\"durationMs\", top_trace.get(\"\
          duration_ms\", 0))\n    \n    # è¨ˆç®— baseline (ç°¡å–®å–æ‰€æœ‰ traces çš„ p95)\n   \
          \ durations = [t.get(\"durationMs\", t.get(\"duration_ms\", 0)) for t in\
          \ traces]\n    durations.sort()\n    p95_index = int(len(durations) * 0.95)\n\
          \    baseline_p95 = durations[p95_index] if p95_index < len(durations) else\
          \ durations[-1] if durations else 1000\n    \n    # åˆ¤æ–·æ˜¯å¦ç•°å¸¸: top trace duration\
          \ > baseline p95 * 1.5\n    is_anomalous = top_duration > baseline_p95 *\
          \ 1.5 if baseline_p95 > 0 else len(traces) > 0\n    \n    return {\n   \
          \     \"is_anomalous\": is_anomalous,\n        \"top_trace_id\": top_trace.get(\"\
          traceId\", \"\"),\n        \"top_trace_duration_ms\": top_duration,\n   \
          \     \"slow_trace_count\": len(traces),\n        \"baseline_p95_ms\": baseline_p95,\n\
          \        \"evidence_summary\": f\"æ‰¾åˆ° {len(traces)} æ¢ tracesï¼Œæœ€æ…¢ {top_duration}msï¼Œbaseline\
          \ p95 {baseline_p95}ms\"\n    }\n"
        code_language: python3
        outputs:
          baseline_p95_ms:
            children: null
            type: number
          evidence_summary:
            children: null
            type: string
          is_anomalous:
            children: null
            type: string
          slow_trace_count:
            children: null
            type: number
          top_trace_duration_ms:
            children: null
            type: number
          top_trace_id:
            children: null
            type: string
        selected: false
        title: åˆ¤æ–·ç•°å¸¸ç‹€æ…‹
        type: code
        variables:
        - value_selector:
          - node-tempo-search
          - body
          value_type: string
          variable: body
      height: 52
      id: node-judge-anomaly
      position:
        x: 1117.5
        y: 358.5
      positionAbsolute:
        x: 1117.5
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'accept:application/json'
        method: get
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 60
          max_write_timeout: 10
        title: å–å¾— Trace è©³æƒ…
        type: http-request
        url: '{{#env.TEMPO_API_URL#}}/v1/traces/{{#node-judge-anomaly.top_trace_id#}}/longest-span'
        variables: []
      height: 141
      id: node-trace-detail
      position:
        x: 1281.25
        y: 489.74999999999994
      positionAbsolute:
        x: 1281.25
        y: 489.74999999999994
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str, total_duration_ms: int):\n    \"\
          \"\"\n    åˆ†æ trace è©³æƒ…ï¼Œæ‰¾å‡º critical path å’Œå«Œç–‘é»\n    è™•ç†æ–°æ ¼å¼: { traceId,\
          \ longestSpan: { spanId, name, service, durationMs, ... } }\n    \"\"\"\n\
          \    try:\n        data = json.loads(body)\n    except:\n        return\
          \ {\n            \"suspects_json\": \"[]\",\n            \"top_suspect_service\"\
          : \"\",\n            \"top_suspect_operation\": \"\",\n            \"top_suspect_duration_ms\"\
          : 0,\n            \"top_suspect_type\": \"unknown\",\n            \"critical_path_summary\"\
          : \"ç„¡æ³•è§£æ trace è©³æƒ…\"\n        }\n    \n    # è™•ç†æ–°æ ¼å¼: longestSpan\n    longest_span\
          \ = data.get(\"longestSpan\", {})\n    \n    # ä¹Ÿæ”¯æ´èˆŠæ ¼å¼: suspects é™£åˆ—\n    suspects\
          \ = data.get(\"suspects\", [])\n    \n    # å¦‚æœæœ‰ longestSpanï¼Œå°‡å…¶è½‰æ›ç‚º suspects\
          \ æ ¼å¼\n    if longest_span and not suspects:\n        span_duration = longest_span.get(\"\
          durationMs\", 0)\n        pct_of_trace = (span_duration / total_duration_ms\
          \ * 100) if total_duration_ms > 0 else 0\n        \n        suspects = [{\n\
          \            \"spanId\": longest_span.get(\"spanId\", \"\"),\n         \
          \   \"service\": longest_span.get(\"service\", longest_span.get(\"serviceName\"\
          , \"\")),\n            \"operation\": longest_span.get(\"name\", longest_span.get(\"\
          operationName\", \"\")),\n            \"duration_ms\": span_duration,\n \
          \           \"pct_of_trace\": pct_of_trace,\n            \"suspect_type\"\
          : \"longest_span\"\n        }]\n    \n    if not suspects:\n        return\
          \ {\n            \"suspects_json\": \"[]\",\n            \"top_suspect_service\"\
          : \"\",\n            \"top_suspect_operation\": \"\",\n            \"top_suspect_duration_ms\"\
          : 0,\n            \"top_suspect_type\": \"unknown\",\n            \"critical_path_summary\"\
          : \"æœªæ‰¾åˆ°å«Œç–‘é»\"\n        }\n    \n    # å– top suspect\n    top = suspects[0]\n\
          \    \n    # æ§‹å»ºæ‘˜è¦\n    summary_parts = []\n    for s in suspects[:3]:\n\
          \        pct = s.get(\"pct_of_trace\", 0)\n        summary_parts.append(f\"\
          {s.get('operation', 'unknown')} ({pct:.1f}%)\")\n    \n    return {\n  \
          \      \"suspects_json\": json.dumps(suspects, ensure_ascii=False),\n  \
          \      \"top_suspect_service\": top.get(\"service\", \"\"),\n        \"\
          top_suspect_operation\": top.get(\"operation\", \"\"),\n        \"top_suspect_duration_ms\"\
          : top.get(\"duration_ms\", 0),\n        \"top_suspect_type\": top.get(\"\
          suspect_type\", \"unknown\"),\n        \"critical_path_summary\": \" â†’ \"\
          .join(summary_parts) if summary_parts else \"ç„¡å¯ç”¨æ‘˜è¦\"\n    }\n"
        code_language: python3
        outputs:
          critical_path_summary:
            children: null
            type: string
          suspects_json:
            children: null
            type: string
          top_suspect_duration_ms:
            children: null
            type: number
          top_suspect_operation:
            children: null
            type: string
          top_suspect_service:
            children: null
            type: string
          top_suspect_type:
            children: null
            type: string
        selected: false
        title: åˆ†æ Critical Path
        type: code
        variables:
        - value_selector:
          - node-trace-detail
          - body
          value_type: string
          variable: body
        - value_selector:
          - node-judge-anomaly
          - top_trace_duration_ms
          value_type: number
          variable: total_duration_ms
      height: 52
      id: node-critical-path
      position:
        x: 1451.25
        y: 358.5
      positionAbsolute:
        x: 1451.25
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: topology-body
            key: ''
            type: text
            value: "{\n  \"service\": \"{{#node-parse-mapping.rootServiceName#}}\"\
              ,\n  \"env\": \"{{#node-parse-alert.structured_output.env#}}\",\n  \"\
              timestamp\": \"{{#node-parse-time.end#}}\",\n  \"depth\": 1\n}\n"
          type: raw-text
        headers: 'Content-Type:application/json

          accept:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 30
          max_write_timeout: 10
        title: æŸ¥è©¢æœå‹™æ‹“æ’² (æœªå¯¦ä½œ)
        type: http-request
        url: '{{#env.TOPOLOGY_API_URL#}}/api/topology/dependencies'
        variables: []
      height: 141
      id: node-topology-api
      position:
        x: 1537.5
        y: 200
      positionAbsolute:
        x: 1537.5
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: snmp-body
            key: ''
            type: text
            value: "{\n  \"service\": \"{{#node-parse-mapping.rootServiceName#}}\"\
              ,\n  \"env\": \"{{#node-parse-alert.structured_output.env#}}\",\n  \"\
              start_time\": \"{{#node-parse-time.start#}}\",\n  \"end_time\": \"\
              {{#node-parse-time.end#}}\",\n  \"metrics\": [\"cpu_usage\", \"memory_usage\"\
              , \"network_io\", \"disk_io\"],\n  \"include_baseline\": true\n}\n"
          type: raw-text
        headers: 'Content-Type:application/json

          accept:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 30
          max_write_timeout: 10
        title: æŸ¥è©¢ SNMP/Metrics (æœªå¯¦ä½œ)
        type: http-request
        url: '{{#env.SNMP_API_URL#}}/api/metrics/query'
        variables: []
      height: 141
      id: node-snmp-api
      position:
        x: 1537.5
        y: 580
      positionAbsolute:
        x: 1537.5
        y: 580
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(topology_body: str, snmp_body: str):\n    \"\
          \"\"\n    æ•´åˆæ‹“æ’²èˆ‡ SNMP/Metrics è­‰æ“š\n    \"\"\"\n    # è§£æ topology API\
          \ å›æ‡‰\n    try:\n        topology_data = json.loads(topology_body)\n   \
          \ except:\n        topology_data = {\n            \"error\": \"Failed to\
          \ parse topology response\",\n            \"dependencies_1hop\": [],\n \
          \           \"call_paths\": []\n        }\n    \n    # è§£æ SNMP/Metrics\
          \ API å›æ‡‰\n    try:\n        snmp_data = json.loads(snmp_body)\n    except:\n\
          \        snmp_data = {\n            \"error\": \"Failed to parse SNMP response\"\
          ,\n            \"signals\": [],\n            \"infra_suspect\": []\n   \
          \     }\n    \n    # æ§‹å»ºæ‹“æ’²ä¸Šä¸‹æ–‡\n    topology_context = {\n        \"\
          root_service\": topology_data.get(\"service\", \"\"),\n        \"dependencies_1hop\"\
          : topology_data.get(\"dependencies\", []),\n        \"call_paths\": topology_data.get(\"\
          call_paths\", [])\n    }\n    \n    # æ§‹å»º SNMP è­‰æ“š\n    snmp_evidence\
          \ = {\n        \"time_window\": snmp_data.get(\"time_window\", {}),\n  \
          \      \"baseline_window\": snmp_data.get(\"baseline_window\", {}),\n  \
          \      \"signals\": snmp_data.get(\"metrics\", []),\n        \"infra_suspect\"\
          : snmp_data.get(\"anomalies\", [])\n    }\n    \n    # æ•´åˆçµæœ\n    combined\
          \ = {\n        \"topology_context\": topology_context,\n        \"snmp_evidence\"\
          : snmp_evidence\n    }\n    \n    return {\n        \"topology_context\"\
          : json.dumps(topology_context, ensure_ascii=False),\n        \"snmp_evidence\"\
          : json.dumps(snmp_evidence, ensure_ascii=False),\n        \"combined_json\"\
          : json.dumps(combined, ensure_ascii=False)\n    }\n"
        code_language: python3
        outputs:
          combined_json:
            children: null
            type: string
          snmp_evidence:
            children: null
            type: string
          topology_context:
            children: null
            type: string
        selected: false
        title: æ•´åˆåŸºç¤è¨­æ–½è­‰æ“š (å·²åœç”¨)
        type: code
        variables:
        - value_selector:
          - node-topology-api
          - body
          value_type: string
          variable: topology_body
        - value_selector:
          - node-snmp-api
          - body
          value_type: string
          variable: snmp_body
      height: 52
      id: node-merge-infra-evidence
      position:
        x: 1830
        y: 390
      positionAbsolute:
        x: 1830
        y: 390
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: rag-search-body
            key: ''
            type: text
            value: "{\n  \"spanName\": \"{{#node-critical-path.top_suspect_operation#}}\"\
              \n}\n"
          type: raw-text
        headers: 'Content-Type:application/json

          accept:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: false
        timeout:
          max_connect_timeout: 10
          max_read_timeout: 60
          max_write_timeout: 10
        title: RAG æœå°‹åŸå§‹ç¢¼
        type: http-request
        url: '{{#env.RAG_API_URL#}}/api/source-code'
        variables: []
      height: 141
      id: node-rag-search
      position:
        x: 1737.5
        y: 489.74999999999994
      positionAbsolute:
        x: 1737.5
        y: 489.74999999999994
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: /Users/chtadmin/mlx/models/Qwen2.5-14B-Instruct-bf16
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: system-rca
          role: system
          text: 'ä½ æ˜¯ä¸€ä½è³‡æ·±çš„ SRE/AIOps å°ˆå®¶ï¼Œå°ˆé–€æ’°å¯«æ ¹å› åˆ†æ (RCA) å ±å‘Šã€‚


            ä½ çš„ä»»å‹™æ˜¯ï¼š

            1. æ•´åˆ tracing è­‰æ“šã€ç¨‹å¼ç¢¼åˆ†æç­‰å¤šç¶­åº¦è³‡è¨Š

            2. æå‡ºæœ‰è­‰æ“šæ”¯æŒçš„æ ¹å› å‡èªª

            3. ç‚ºæ¯å€‹å‡èªªæä¾›é©—è­‰æ–¹å¼

            4. ç”Ÿæˆå¯è¡Œçš„æ”¹å–„å»ºè­°


            ## æ ¸å¿ƒåŸå‰‡

            1. **è­‰æ“šå°å‘**ï¼šæ¯å€‹çµè«–å¿…é ˆå¼•ç”¨å…·é«”è­‰æ“šï¼ˆtraceIdã€spanã€code locationï¼‰

            2. **ä¸ç¡¬çŒœ**ï¼šè³‡è¨Šä¸è¶³æ™‚æ˜ç¢ºåˆ—å‡ºã€Œç¼ºå°‘çš„è³‡è¨Šã€ï¼Œä¸å¯è™›æ§‹åŸå› 

            3. **å¯é©—è­‰**ï¼šæ¯å€‹å‡èªªå¿…é ˆé™„å¸¶é©—è­‰æ­¥é©Ÿ

            4. **å¯è¡Œå‹•**ï¼šæ”¹å–„å»ºè­°å¿…é ˆå…·é«”ä¸”å¯åŸ·è¡Œ


            ## è¼¸å‡ºæ ¼å¼

            è«‹ä½¿ç”¨ Markdown æ ¼å¼è¼¸å‡ºï¼ŒåŒ…å«ä»¥ä¸‹ç« ç¯€ï¼š

            1. åŸ·è¡Œæ‘˜è¦

            2. è­‰æ“šéˆ

            3. æ ¹å› å‡èªªï¼ˆå«ä¿¡å¿ƒåº¦ï¼‰

            4. æ”¹å–„å»ºè­°ï¼ˆçŸ­æœŸ/ä¸­æœŸ/é•·æœŸï¼‰

            5. ç¼ºå°‘çš„è³‡è¨Š

            '
        - id: user-rca
          role: user
          text: 'è«‹æ ¹æ“šä»¥ä¸‹æ”¶é›†åˆ°çš„è³‡æ–™ï¼Œé€²è¡Œæ ¹å› åˆ†æä¸¦ç”Ÿæˆ RCA å ±å‘Šã€‚


            ====================

            ã€å‘Šè­¦è³‡è¨Šã€‘

            ====================

            - äº‹ä»¶æ™‚é–“: {{#node-parse-alert.structured_output.time_stamp#}}

            - ç’°å¢ƒ: {{#node-parse-alert.structured_output.env#}}

            - æœå‹™åç¨±: {{#node-parse-alert.structured_output.service_name#}}

            - ä¸»æ©Ÿ: {{#node-parse-alert.structured_output.host#}}

            - URL: {{#node-parse-alert.structured_output.url#}}

            - ç—‡ç‹€: {{#node-parse-alert.structured_output.user_symptom#}}


            ====================

            ã€Tempo è­‰æ“šã€‘

            ====================

            - æ˜¯å¦ç•°å¸¸: {{#node-judge-anomaly.is_anomalous#}}

            - æ…¢ Trace æ•¸é‡: {{#node-judge-anomaly.slow_trace_count#}}

            - æœ€æ…¢ Trace ID: {{#node-judge-anomaly.top_trace_id#}}

            - æœ€æ…¢ Trace Duration: {{#node-judge-anomaly.top_trace_duration_ms#}} ms

            - Baseline P95: {{#node-judge-anomaly.baseline_p95_ms#}} ms

            - è­‰æ“šæ‘˜è¦: {{#node-judge-anomaly.evidence_summary#}}


            ====================

            ã€æ…¢é»åˆ†æã€‘

            ====================

            - Top å«Œç–‘æœå‹™: {{#node-critical-path.top_suspect_service#}}

            - Top å«Œç–‘æ“ä½œ: {{#node-critical-path.top_suspect_operation#}}

            - Top å«Œç–‘ Duration: {{#node-critical-path.top_suspect_duration_ms#}} ms

            - Top å«Œç–‘é¡å‹: {{#node-critical-path.top_suspect_type#}}

            - Critical Path æ‘˜è¦: {{#node-critical-path.critical_path_summary#}}

            - å®Œæ•´å«Œç–‘é»åˆ—è¡¨: {{#node-critical-path.suspects_json#}}


            ====================

            ã€åŸå§‹ç¢¼è³‡è¨Šã€‘

            ====================

            {{#node-rag-search.body#}}


            ====================


            è«‹ä¾æ“šä¸Šè¿°è³‡æ–™ï¼Œç”Ÿæˆå®Œæ•´çš„ RCA å ±å‘Šã€‚

            '
        selected: false
        structured_output_enabled: false
        title: Root Cause Analysis
        type: llm
        vision:
          enabled: false
      height: 88
      id: node-rca
      position:
        x: 1918.75
        y: 358.5
      positionAbsolute:
        x: 1918.75
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        outputs:
        - value_selector:
          - node-rca
          - text
          value_type: string
          variable: result
        selected: false
        title: è¼¸å‡º
        type: end
      height: 88
      id: node-end
      position:
        x: 2248.75
        y: 358.5
      positionAbsolute:
        x: 2248.75
        y: 358.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        author: System
        desc: ''
        height: 216
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ç¯„ä¾‹å‘Šè­¦ä¿¡ï¼š","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"åºè™Ÿï¼š20166775_20292200","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"å‘Šè­¦ç‹€æ…‹ï¼šå‘Šè­¦ä¸­","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"äº‹ä»¶ç­‰ç´šï¼šCritical","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"äº‹ä»¶åç¨±ï¼šç³»çµ±å›æ‡‰ç·©æ…¢","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"æœå‹™åç¨±ï¼šorder-service","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ç›£æ§URLï¼šhttp://api.example.com/api/orders","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ç’°å¢ƒè³‡è¨Šï¼šPROD","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"äº‹ä»¶ç™¼ç”Ÿæ™‚é–“ï¼š2026-01-16
          14:30:00","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 535
      height: 216
      id: node-note-example
      position:
        x: -185
        y: 75.00000000000001
      positionAbsolute:
        x: -185
        y: 75.00000000000001
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 535
    - data:
        author: alexchang
        desc: ''
        height: 796
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"#
          æ…¢é€Ÿå‘Šè­¦ RCA å·¥ä½œæµ - å¿«é€Ÿå…¥é–€","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ¯ ä¸€å¥è©±èªªæ˜","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"**å¾å‘Šè­¦ä¿¡è‡ªå‹•ç”Ÿæˆæ ¹å› åˆ†æå ±å‘Š**
          - æ•´åˆ Tempo Tracing + æœå‹™æ˜ å°„ + RAG åŸå§‹ç¢¼æª¢ç´¢","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ”„ æµç¨‹æ¶æ§‹ï¼ˆ6 å€‹éšæ®µï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å‘Šè­¦ä¿¡
          â†’ [A]è§£æ â†’ [B]å®šä½æœå‹™ â†’ [C]æŸ¥ Tempo â†’ [D]æ‰¾æ…¢é» â†’ [E]å–ç¨‹å¼ç¢¼ â†’ [F]ç”Ÿæˆå ±å‘Š","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          éšæ®µ | åŠŸèƒ½ | ç¯€é»é¡å‹ | è² è²¬äºº |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|------|------|----------|--------|","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **A. å‘Šè­¦è§£æ** | è§£æå‘Šè­¦ä¿¡ç‚ºçµæ§‹åŒ–è³‡æ–™ | ğŸ¤– LLM + ğŸ’» Code | âœ… å·²å®Œæˆ |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **B. æœå‹™æ˜ å°„** | URL â†’ æœå‹™åç¨±/ç‰ˆæœ¬ | ğŸŒ API + ğŸ’» Code | âš ï¸ **éœ€é–‹ç™¼ API** |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **C. Tempo æŸ¥è©¢** | æœå°‹æ…¢ traces | ğŸŒ API + ğŸ’» Code | âš ï¸ **éœ€é–‹ç™¼ API** |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **D. æ…¢é»å®šä½** | åˆ†æ Critical Path | ğŸŒ API + ğŸ’» Code | âš ï¸ **éœ€é–‹ç™¼ API** |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **E. åŸå§‹ç¢¼æª¢ç´¢** | RAG æœå°‹ code | ğŸŒ API | ğŸ”µ å¯é¸ |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **F. RCA å ±å‘Š** | ç”Ÿæˆåˆ†æå ±å‘Š | ğŸ¤– LLM | âœ… å·²å®Œæˆ |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸš¨ éœ€è¦é–‹ç™¼çš„ APIï¼ˆå…± 4 å€‹ï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          ğŸ”´ å„ªå…ˆç´š 1: Tempo APIï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          API | Endpoint | åŠŸèƒ½ | è¼¸å…¥ | è¼¸å‡º |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|-----|----------|------|------|------|","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **æœå°‹æ…¢ Traces** | `POST /api/v1/search_slow_traces` | æ‰¾å‡ºæŒ‡å®šæœå‹™çš„æ…¢ traces | rootServiceName,
          æ™‚é–“çª— | traces åˆ—è¡¨ + baseline p95 |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **åˆ†æ Trace è©³æƒ…** | `POST /api/v1/analyze_trace` | åˆ†æå–®ä¸€ trace çš„æ…¢é» | traceId
          | suspects åˆ—è¡¨ï¼ˆæœ€è€—æ™‚çš„ spansï¼‰ |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"**è³‡æ–™ä¾†æº**:
          Tempoï¼ˆéœ€å°è£æŸ¥è©¢é‚è¼¯ + Critical Path åˆ†æï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          ğŸŸ¡ å„ªå…ˆç´š 2: æœå‹™æ˜ å°„ API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          API | Endpoint | åŠŸèƒ½ | è¼¸å…¥ | è¼¸å‡º |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|-----|----------|------|------|------|","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **æœå‹™æ˜ å°„** | `POST /api/service-mapping` | URL â†’ æœå‹™åç¨±/ç‰ˆæœ¬ | domain, api_path,
          timestamp | rootServiceName, version, owner_team |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"**è³‡æ–™ä¾†æº**:
          Kubernetes Ingress / Service Mesh / æœå‹™è¨»å†Šä¸­å¿ƒ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          ğŸ”µ å„ªå…ˆç´š 3: RAG åŸå§‹ç¢¼ APIï¼ˆå¯å¾Œè£œï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          API | Endpoint | åŠŸèƒ½ | è¼¸å…¥ | è¼¸å‡º |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|-----|----------|------|------|------|","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **RAG æœå°‹** | `POST /api/code/search` | æª¢ç´¢ method çš„åŸå§‹ç¢¼ | service, operation,
          version | code snippet + file path |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"**è³‡æ–™ä¾†æº**:
          RAG å‘é‡åº« + Git Repository","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ“‹ API è©³ç´°è¦æ ¼ç¯„ä¾‹","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          1ï¸âƒ£ æœå°‹æ…¢ Traces API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```json","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          POST /api/v1/search_slow_traces","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"rootServiceName\":
          \"order-service\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"start_time\":
          \"2026-01-16T06:15:00Z\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"end_time\":
          \"2026-01-16T06:30:00Z\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"min_duration_ms\":
          1000,","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"limit\":
          5","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          Response","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"traces\":
          [","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    {\"traceId\":
          \"abc123\", \"duration_ms\": 32000}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  ],","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"baseline\":
          {\"p95_ms\": 1200}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          2ï¸âƒ£ åˆ†æ Trace è©³æƒ… API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```json","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          POST /api/v1/analyze_trace","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"traceId\":
          \"abc123def456\"","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          Response","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"suspects\":
          [","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    {","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"spanId\":
          \"span_001\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"service\":
          \"order-service\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"operation\":
          \"OrderRepository.createOrder\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"duration_ms\":
          28000,","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"pct_of_trace\":
          86.3,","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"suspect_type\":
          \"db\"","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    }","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  ]","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"###
          3ï¸âƒ£ æœå‹™æ˜ å°„ API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```json","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          POST /api/service-mapping","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"timestamp\":
          \"2026-01-16T06:30:00Z\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"env\":
          \"prod\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"domain\":
          \"api.example.com\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"api_path\":
          \"/api/orders\"","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"//
          Response","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"confidence\":
          0.95,","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"candidates\":
          [{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"rootServiceName\":
          \"order-service\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"version\":
          \"v2.3.1-abc1234\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"owner_team\":
          \"order-team\"","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  }]","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"```","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ‘¥ åˆ†å·¥å»ºè­°","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          ä»»å‹™ | å·¥ä½œé‡ | æŠ€è¡“è¦æ±‚ | å»ºè­°è² è²¬äºº |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|------|--------|----------|------------|","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **Tempo Search API** | 3-5 å¤© | Python + Tempo Query | å¾Œç«¯ A |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **Trace Analyze API** | 3-5 å¤© | Critical Path æ¼”ç®—æ³• | å¾Œç«¯ B |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **Service Mapping API** | 2-3 å¤© | K8s API / Service Mesh | å¾Œç«¯ C |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **RAG Code Search API** | 5-7 å¤© | RAG å‘é‡æª¢ç´¢ + Git API | å¾Œç«¯ D |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"|
          **Dify Workflow æ•´åˆ** | 1-2 å¤© | é…ç½® + æ¸¬è©¦ | DevOps |","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸš€ å¿«é€Ÿå•Ÿå‹•","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"1.
          **åŒ¯å…¥ Workflow**: ä¸Šå‚³ `slow-rca-workflow.yml` åˆ° Dify","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"2.
          **è¨­å®šç’°å¢ƒè®Šæ•¸**: `DEV_DOMAIN`, `TEMPO_API_URL`, `RAG_API_URL`","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"3.
          **å¯¦ä½œ API**: å…ˆåš Tempo APIï¼ˆå„ªå…ˆç´š 1ï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"4.
          **æ¸¬è©¦**: ä½¿ç”¨ç¯„ä¾‹å‘Šè­¦ä¿¡é©—è­‰æµç¨‹","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ“ è¯çµ¡äºº","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"-
          **å°ˆæ¡ˆè² è²¬äºº**: Alex Chang","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"-
          **è©³ç´°æ–‡æª”**: è«‹è¦‹ `README.md` å’Œ `PLAN.md`","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"-
          **API å¥‘ç´„**: è«‹è¦‹ `README.md` ç¬¬ 4 ç« ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"##
          ğŸ¯ MVP æœ€å°å¯è¡Œç‰ˆæœ¬","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"**åªéœ€å¯¦ä½œå‰
          2 å€‹ API å³å¯è·‘é€šæµç¨‹**:","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"1.
          âœ… Tempo Search API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"2.
          âœ… Trace Analyze API","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"3.
          â¸ï¸ Service Mapping APIï¼ˆå…ˆç”¨ç¡¬ç·¨ç¢¼æ˜ å°„è¡¨ï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"4.
          â¸ï¸ RAG Code Search APIï¼ˆå ±å‘Šä¸å«ç¨‹å¼ç¢¼ç‰‡æ®µï¼‰","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"---","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 987
      height: 796
      id: '1768786459679'
      position:
        x: -1224.1728302743236
        y: 75.00000000000001
      positionAbsolute:
        x: -1224.1728302743236
        y: 75.00000000000001
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 987
    - data:
        author: alexchang
        desc: ''
        height: 88
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"å¯ä»¥å†å¤šåˆ†å‡ºä¸€å€‹
          coding agent ä¾†å–®ç¨åˆ†æåŸå§‹ç¢¼ï¼Œ","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"é™ä½ä¸»æ¨è£¡æ¨¡å‹
          context loading ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 88
      id: '1768788540681'
      position:
        x: 1869.6094021656752
        y: 536.3201712738705
      positionAbsolute:
        x: 1869.6094021656752
        y: 536.3201712738705
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        author: alexchang
        desc: ''
        height: 347
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"å»ºè­°æ–°å¢æ¬„ä½","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"{","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  \"topology_context\":
          {","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"root_service\":
          \"order-service\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"dependencies_1hop\":
          [","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      {\"service\":\"inventory-service\",\"type\":\"http\",\"owner_team\":\"inv-team\"},","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      {\"service\":\"postgres\",\"type\":\"db\",\"owner_team\":\"db-team\"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    ],","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    \"call_paths\":
          [","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"order-service
          -> postgres\",","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"      \"order-service
          -> inventory-service\"","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"    ]","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"  }","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"}","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":null,"format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 396
      height: 347
      id: '1768788837135'
      position:
        x: 1451.25
        y: -1.0081916998329064
      positionAbsolute:
        x: 1451.25
        y: -1.0081916998329064
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 396
    viewport:
      x: -864.5733113303177
      y: -33.77578004151053
      zoom: 1.1184658723271792
  rag_pipeline_variables: []
